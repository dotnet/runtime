<Project>
    <PropertyGroup>
        <FeatureCoreCLR>true</FeatureCoreCLR>
        <FeaturePerfTracing>true</FeaturePerfTracing>
        <FeaturePortableEntryPoints>false</FeaturePortableEntryPoints>
        <FeaturePortableHelpers>false</FeaturePortableHelpers>
        <ProfilingSupportedBuild>true</ProfilingSupportedBuild>
        <FeaturePortableThreadPool>true</FeaturePortableThreadPool>
        <FeaturePortableTimer>true</FeaturePortableTimer>
        <FeatureMultithreading Condition="('$(TargetsBrowser)' != 'true' and '$(TargetsWasi)' != 'true') or '$(WasmEnableThreads)' == 'true'">true</FeatureMultithreading>
    </PropertyGroup>

    <PropertyGroup Condition="'$(TargetsAndroid)' == 'true' OR '$(Configuration)' == 'debug' OR '$(Configuration)' == 'checked'">
        <FeatureJavaMarshal>true</FeatureJavaMarshal>
    </PropertyGroup>

    <PropertyGroup Condition="'$(TargetsWasm)' == 'true'">
        <FeaturePortableEntryPoints>true</FeaturePortableEntryPoints>
        <FeaturePortableHelpers>true</FeaturePortableHelpers>
        <FeatureInterpreter>true</FeatureInterpreter>
        
        <!-- single thread -->
        <FeaturePortableTimer Condition="'$(WasmEnableThreads)' != 'true'">false</FeaturePortableTimer>
        <FeaturePortableThreadPool Condition="'$(WasmEnableThreads)' != 'true'">false</FeaturePortableThreadPool>
        <!-- until we implement ST event pipe for CoreCLR -->
        <FeaturePerfTracing>false</FeaturePerfTracing>
    </PropertyGroup>

    <PropertyGroup Condition="'$(TargetsUnix)' == 'true'">
        <FeatureXplatEventSource Condition="'$(FeatureXplatEventSource)' == '' AND '$(TargetOS)' == 'linux'">true</FeatureXplatEventSource>
        <FeatureComWrappers>true</FeatureComWrappers>
    </PropertyGroup>

    <PropertyGroup Condition="'$(TargetsWindows)' == 'true'">
        <FeatureComWrappers>true</FeatureComWrappers>
        <FeatureCominterop>true</FeatureCominterop>
        <FeatureCominteropApartmentSupport>true</FeatureCominteropApartmentSupport>
        <FeatureTypeEquivalence>true</FeatureTypeEquivalence>
        <FeatureIjw>true</FeatureIjw>
    </PropertyGroup>

    <PropertyGroup Condition="'$(TargetsOSX)' == 'true' OR '$(TargetsMacCatalyst)' == 'true' OR '$(TargetsiOS)' == 'true' OR '$(TargetstvOS)' == 'true'">
        <FeatureObjCMarshal>true</FeatureObjCMarshal>
    </PropertyGroup>

    <PropertyGroup Condition="'$(TargetsMacCatalyst)' == 'true' OR '$(TargetsiOS)' == 'true' OR '$(TargetstvOS)' == 'true'">
        <FeatureInterpreter>true</FeatureInterpreter>
    </PropertyGroup>

    <PropertyGroup Condition="('$(Platform)' == 'x64' OR '$(Platform)' == 'arm64' OR '$(Platform)' == 'arm' OR '$(Platform)' == 'riscv64') AND ('$(Configuration)' == 'debug' OR '$(Configuration)' == 'checked') AND '$(TargetsAndroid)' != 'true'">
        <FeatureInterpreter>true</FeatureInterpreter>
    </PropertyGroup>

    <PropertyGroup>
        <DefineConstants Condition="'$(FeatureJavaMarshal)' == 'true'">$(DefineConstants);FEATURE_JAVAMARSHAL</DefineConstants>
        <DefineConstants Condition="'$(FeatureComWrappers)' == 'true'">$(DefineConstants);FEATURE_COMWRAPPERS</DefineConstants>
        <DefineConstants Condition="'$(FeatureCominterop)' == 'true'">$(DefineConstants);FEATURE_COMINTEROP</DefineConstants>
        <DefineConstants Condition="'$(FeatureCominteropApartmentSupport)' == 'true'">$(DefineConstants);FEATURE_COMINTEROP_APARTMENT_SUPPORT</DefineConstants>
        <DefineConstants Condition="'$(FeatureIjw)' == 'true'">$(DefineConstants);FEATURE_IJW</DefineConstants>
        <DefineConstants Condition="'$(FeatureObjCMarshal)' == 'true'">$(DefineConstants);FEATURE_OBJCMARSHAL</DefineConstants>
        <DefineConstants Condition="'$(FeaturePerfTracing)' == 'true'">$(DefineConstants);FEATURE_PERFTRACING</DefineConstants>
        <DefineConstants Condition="'$(FeatureXplatEventSource)' == 'true'">$(DefineConstants);FEATURE_EVENTSOURCE_XPLAT</DefineConstants>
        <DefineConstants Condition="'$(FeatureTypeEquivalence)' == 'true'">$(DefineConstants);FEATURE_TYPEEQUIVALENCE</DefineConstants>
        <DefineConstants Condition="'$(FeatureInterpreter)' == 'true'">$(DefineConstants);FEATURE_INTERPRETER</DefineConstants>
        <DefineConstants Condition="'$(FeatureDynamicCodeCompiled)' == 'true'">$(DefineConstants);FEATURE_DYNAMIC_CODE_COMPILED</DefineConstants>
        <DefineConstants Condition="'$(FeaturePortableEntryPoints)' == 'true'">$(DefineConstants);FEATURE_PORTABLE_ENTRYPOINTS</DefineConstants>
        <DefineConstants Condition="'$(FeaturePortableHelpers)' == 'true'">$(DefineConstants);FEATURE_PORTABLE_HELPERS</DefineConstants>
        <DefineConstants Condition="'$(FeatureMultithreading)' == 'true'">$(DefineConstants);FEATURE_MULTITHREADING</DefineConstants>
        <DefineConstants Condition="'$(TargetsBrowser)' == 'true' and '$(FeatureMultithreading)' == 'true'">$(DefineConstants);FEATURE_WASM_MANAGED_THREADS</DefineConstants>
        <DefineConstants Condition="'$(ProfilingSupportedBuild)' == 'true'">$(DefineConstants);PROFILING_SUPPORTED</DefineConstants>
        <DefineConstants Condition="'$(TargetsBrowser)' == 'true'">$(DefineConstants);TARGET_BROWSER</DefineConstants>
    </PropertyGroup>
</Project>
