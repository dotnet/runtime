Number of tests passed: 249 failed: 4 disabled: 75
Test run complete

Failed tests:

"exception_handling/RaiseException/test1/paltest_raiseexception_test1"
"exception_handling/RaiseException/test2/paltest_raiseexception_test2"
"exception_handling/RaiseException/test3/paltest_raiseexception_test3"

 * we don't have unwind available on wasm, because of implicit stack. that can change once we start generating code. disable these now. it is possible that there still might be some work to do for the interpreter, if we run into part of CoreCLR code which might be using it

{0x60e84-0x206} ASSERT [EXCEPT ] at /Users/rodo/git/runtime-main/src/coreclr/pal/src/include/pal/context.h.1398: {0x60e84-0x206} TRACE [DEBUG  ] at DebugBreak.405: Calling DBG_DebugBreak localhost:8283:140:33
    error http://localhost:8283/#exception_handling/RaiseException/test1/paltest_raiseexception_test1:140
    put_char http://localhost:8283/paltests.js:1633
    write http://localhost:8283/paltests.js:1579
    write http://localhost:8283/paltests.js:3350
    doWritev http://localhost:8283/paltests.js:5058
    _fd_write http://localhost:8283/paltests.js:5072
    __stdio_write http://localhost:8283/paltests.wasm:1559493
    __vfprintf_internal http://localhost:8283/paltests.wasm:1583598
    vfprintf http://localhost:8283/paltests.wasm:1587298
    fprintf http://localhost:8283/paltests.wasm:1560483
    DBG_printf http://localhost:8283/paltests.wasm:975982
    DebugBreak http://localhost:8283/paltests.wasm:695144
    AssertBreak http://localhost:8283/paltests.wasm:665747
    paltests.wasm.CONTEXTGetPC(_CONTEXT*) http://localhost:8283/paltests.wasm:707761
    PAL_VirtualUnwind http://localhost:8283/paltests.wasm:706341
    RaiseException http://localhost:8283/paltests.wasm:709992
    paltests.wasm.exception_handling_RaiseException_test1_paltest_raiseexception_test1(int, char**)::$_1::operator()(void*) const http://localhost:8283/paltests.wasm:108438
    paltests.wasm.exception_handling_RaiseException_test1_paltest_raiseexception_test1(int, char**) http://localhost:8283/paltests.wasm:106906
    main http://localhost:8283/paltests.wasm:10668
    createExportWrapper http://localhost:8283/paltests.js:715
    callMain http://localhost:8283/paltests.js:5551
    doRun http://localhost:8283/paltests.js:5601
    run http://localhost:8283/paltests.js:5616
    runCaller http://localhost:8283/paltests.js:5528
    removeRunDependency http://localhost:8283/paltests.js:639
    receiveInstance http://localhost:8283/paltests.js:845
    receiveInstantiationResult http://localhost:8283/paltests.js:863

    this is trying to unwind and save context, which cannot work on wasm. we need to find out, whether the interpreter depends on this functionality

"file_io/CopyFileA/test4/paltest_copyfilea_test4"

/etc/passwd missing - we can package few files to let the tests work and test the filesystem functionality
after I added it to packaged files, we fail in `InternalCanonicalizeRealPath` - possibly problem with realpath call on emscripten

"file_io/CopyFileW/test3/paltest_copyfilew_test3"
"file_io/GetFullPathNameA/test3/paltest_getfullpathnamea_test3"

"filemapping_memmgt/ProbeMemory/ProbeMemory_neg1/paltest_probememory_probememory_neg1"

 * we cannot reserve memory on wasm, so let disable this test too. this test reserves the memory and then tries to read it

{0x60e64-0x206} TRACE [VIRTUAL] at VIRTUALReserveMemory.477: Reserving the memory now..
{0x60e64-0x206} TRACE [VIRTUAL] at ReserveVirtualMemory.570: Reserving the memory now.
warning: unsupported syscall: __syscall_madvise

Entry 0 : 
	 startBoundary 0x70000 
	 memSize 65536 
	 accessProtection 2 
	 allocationType 8192 
	 pNext 0 
	 pLast 0 

ProbeMemory for read didn't FAILED
{0x60e64-0x206} TRACE [VIRTUAL] at VIRTUALFindRegionInformation.249: VIRTUALFindRegionInformation( 0x70000 )
{0x60e64-0x206} TRACE [VIRTUAL] at VirtualFree.1045: Un-committing the following page(s) 458752 to 65536.
{0x60e64-0x206} ASSERT [VIRTUAL] at /Users/rodo/git/runtime-main/src/coreclr/pal/src/map/virtual.cpp.1072: mmap() returned an abnormal value.

"filemapping_memmgt/ProbeMemory/test1/paltest_probememory_test1"

{0x60e64-0x206} TRACE [VIRTUAL] at VIRTUALFindRegionInformation.249: VIRTUALFindRegionInformation( 0 )
{0x60e64-0x206} TRACE [VIRTUAL] at VIRTUALReserveMemory.477: Reserving the memory now..
{0x60e64-0x206} TRACE [VIRTUAL] at ReserveVirtualMemory.570: Reserving the memory now.
{0x60e64-0x206} TRACE [VIRTUAL] at VIRTUALCommitMemory.691: Reserve and commit the memory!
 {0x60e64-0x206} TRACE [VIRTUAL] at VIRTUALFindRegionInformation.249: VIRTUALFindRegionInformation( 0x70000 )
{0x60e64-0x206} TRACE [VIRTUAL] at VIRTUALCommitMemory.719: Committing the memory now..
warning: unsupported syscall: __syscall_mprotect

Entry 0 : 
	 startBoundary 0x70000 
	 memSize 65536 
	 accessProtection 4 
	 allocationType 4096 
	 pNext 0 
	 pLast 0 
{0x60e64-0x206} TRACE [VIRTUAL] at VIRTUALFindRegionInformation.249: VIRTUALFindRegionInformation( 0x70000 )
{0x60e64-0x206} TRACE [VIRTUAL] at VirtualFree.1045: Un-committing the following page(s) 458752 to 65536.
{0x60e64-0x206} ASSERT [VIRTUAL] at /Users/rodo/git/runtime-main/src/coreclr/pal/src/map/virtual.cpp.1072: mmap() returned an abnormal value.

"filemapping_memmgt/VirtualAlloc/test21/paltest_virtualalloc_test21"

 * many mmap related tests were failing because of limited mmap support in emscripten. the WebAssembly doesn't have virtual memory and so many mmap features are missing

"miscellaneous/FlushInstructionCache/test1/paltest_flushinstructioncache_test1"
 * no cache to flush, made it no-op on wasm

"miscellaneous/InterlockedCompareExchange/test2/paltest_interlockedcompareexchange_test2"
 * threading test, creates many threads and awaits them to finish, not supported on wasm, disabled

"miscellaneous/InterlockedDecrement/test2/paltest_interlockeddecrement_test2"
 * threading test, creates many threads and awaits them to finish, not supported on wasm, disabled

"miscellaneous/InterlockedIncrement/test2/paltest_interlockedincrement_test2"
 * threading test, creates many threads and awaits them to finish, not supported on wasm, disabled

Missing tests:

"exception_handling/pal_sxs/test1/paltest_pal_sxs_test1"
"eventprovider/eventprovidertest"

Notes:

check debug_api/OutputDebugStringW/test1/paltest_outputdebugstringw_test1 it should output to stderr and it currently doesn't
