<Project>
  <Target Name="ResolveReadyToRunCompilers" DependsOnTargets="ResolveRuntimeFilesFromLocalBuild">
    <PropertyGroup>
      <PublishReadyToRunPerfmapFormatVersion Condition="'$(PublishReadyToRunPerfmapFormatVersion)' == ''">1</PublishReadyToRunPerfmapFormatVersion>
      <Crossgen2Path>$([MSBuild]::NormalizePath('$(Crossgen2Dir)', 'crossgen2$(ExeSuffix)'))</Crossgen2Path>
      <R2RDotnetHostPath></R2RDotnetHostPath>
    </PropertyGroup>

    <PropertyGroup Condition="'$(CrossBuild)' == 'true' or '$(TargetArchitecture)' != '$(BuildArchitecture)' or '$(EnableNativeSanitizers)' != ''">
      <Crossgen2Path>$([MSBuild]::NormalizePath('$(Crossgen2CrossDir)', 'crossgen2.dll'))</Crossgen2Path>
      <R2RDotnetHostPath>$(DotNetTool)</R2RDotnetHostPath>
    </PropertyGroup>

    <ItemGroup>
      <Crossgen2Tool Include="$(Crossgen2Path)"
                     TargetArch="$(TargetArchitecture)"
                     TargetOS="$(TargetOS)"
                     DotnetHostPath="$(DotnetHostPath)"
                     PerfmapFormatVersion="$(PublishReadyToRunPerfmapFormatVersion)"/>
    </ItemGroup>
  </Target>
</Project>