// Licensed to the .NET Foundation under one or more agreements.
// The .NET Foundation licenses this file to you under the MIT license.

using System;
using System.Numerics;
using System.Runtime.Intrinsics;
using System.Runtime.Intrinsics.Arm;
using Xunit;

public class Runtime_106546
{
    [Fact]
    public static void TestDotProductThrows()
    {
        if (Dp.IsSupported)
        {
            Assert.Throws<ArgumentOutOfRangeException>(() => new Runtime_106546().DotProduct());
        }
    }

    [Fact]
    public static void TestShiftRightThrows()
    {
        if (AdvSimd.IsSupported)
        {
            Assert.Throws<ArgumentOutOfRangeException>(() => new Runtime_106546().ShiftRight());
        }
    }

    // Generated by Fuzzlyn v2.2 on 2024-08-17 15:13:27
    // Run on Arm64 MacOS
    // Seed: 17566447992392941035-vectort,vector64,vector128,armadvsimd,armadvsimdarm64,armaes,armarmbase,armarmbasearm64,armcrc32,armcrc32arm64,armdp,armrdm,armrdmarm64,armsha1,armsha256
    // Reduced from 52.5 KiB to 0.7 KiB in 00:00:21
    // Debug: Throws 'System.ArgumentOutOfRangeException'
    // Release: Runs successfully
    private void DotProduct()
    {
        var vr4 = Vector64.Create<int>(0);
        var vr5 = Vector64.Create<sbyte>(0);
        var vr6 = Vector64.Create<sbyte>(0);
        var vr3 = Dp.DotProductBySelectedQuadruplet(vr4, vr5, vr6, 7);
        Console.WriteLine(vr3);
    }

    private struct S1
    {
        public byte byte_1;
    }

    // Found by Antigen
    private void ShiftRight()
    {
        Vector64<float> floatVec = Vector64.Create(1f);
        Vector64<double> doubleVec = Vector64.CreateScalar((double)82);
        Vector64<int> intVec = Vector64.Create(1, 1);
        Vector128<long> longVec = Vector128<long>.AllBitsSet;
        S1 s1 = new S1();

        for (int i = 0; i < 3; i++)
        {
            Vector64.Shuffle(floatVec += Vector64.AsSingle(doubleVec), AdvSimd.ShiftRightLogicalNarrowingLower(longVec, s1.byte_1) & (intVec - intVec)* 15*4);
        }

        Console.WriteLine(floatVec);
    }
}