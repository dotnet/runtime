<Project Sdk="Microsoft.NET.Sdk">
  <PropertyGroup>
    <OutputType>Exe</OutputType>
    <CLRTestPriority>0</CLRTestPriority>
    <AllowUnsafeBlocks>true</AllowUnsafeBlocks>
    <StartupHookSupport>true</StartupHookSupport>
    <NoWarn>$(NoWarn);IL2026</NoWarn>
    <ReferenceXUnitWrapperGenerator>false</ReferenceXUnitWrapperGenerator>
    <HasMergedInTests>true</HasMergedInTests>
  </PropertyGroup>
  <ItemGroup>
    <Compile Include="StartupHook.cs" />
  </ItemGroup>

  <ItemGroup>
    <CLRTestEnvironmentVariable Include="DOTNET_STARTUP_HOOKS" Value="StartupHook" />
  </ItemGroup>


  <!--
    Treat this test as a merged test runner.
    This test needs to be its own executable to validate the UnmanagedEntryPointsAssembly feature,
    but we want to run this test on mobile platforms as well.
    However, mobile platforms don't support tests that require process isolation, so we can't use RequiresProcessIsolation.
    Instead, we treat this test as a merged test runner itself, so that it can run on mobile platforms.
  -->
  <Import Project="$(TestSourceDir)MergedTestRunner.targets" />
</Project>
