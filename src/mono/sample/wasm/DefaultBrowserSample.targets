<Project>
  <PropertyGroup>
    <WasmCopyAppZipToHelixTestDir Condition="'$(ArchiveTests)' == 'true'">true</WasmCopyAppZipToHelixTestDir>
    <DebugSymbols>true</DebugSymbols>
    <DebugType>embedded</DebugType>
    <!-- note that enabling debugger disables interp optimizations -->
    <WasmDebugLevel Condition="'$(Configuration)' == 'Debug'">-1</WasmDebugLevel>
    <GenerateRunScriptForSample Condition="'$(ArchiveTests)' == 'true'">true</GenerateRunScriptForSample>
    <WasmXHarnessArgs Condition="'$(WasmEnableThreads)' == 'true'">$(WasmXHarnessArgs) --web-server-use-cop</WasmXHarnessArgs>
    <RunScriptCommand>$(ExecXHarnessVar) wasm $(XHarnessCommandVar) --app=. $(XHarnessBrowserPathArg) $(WasmXHarnessArgsVar) $(WasmXHarnessArgs) --html-file=index.html --output-directory=$(XHarnessOutputVar) -- $(MSBuildProjectName).dll</RunScriptCommand>
    <EmitCompilerGeneratedFiles>true</EmitCompilerGeneratedFiles>
    <TestArchiveTestsRoot>$(TestArchiveRoot)chromeonly/</TestArchiveTestsRoot>
    <TestArchiveTestsDir>$(TestArchiveTestsRoot)$(OSPlatformConfig)/</TestArchiveTestsDir>
    <EmccFlags>$(EmccFlags) -sUSE_CLOSURE_COMPILER=1 -sMEMORY64</EmccFlags>
    <WasmEnableMemory64>true</WasmEnableMemory64>  
    <InvariantGlobalization>true</InvariantGlobalization>
  </PropertyGroup>

  <PropertyGroup Condition="'$(Configuration)'=='Debug'">
    <WasmNativeStrip>false</WasmNativeStrip>
    <_WasmDevel>true</_WasmDevel>
    <_EmccOptimizationFlagDefault>-O0</_EmccOptimizationFlagDefault>
  </PropertyGroup>


  <ItemGroup>
    <WasmExtraFilesToDeploy Include="index.html" />
  </ItemGroup>

  <Target Name="RunSample" DependsOnTargets="RunSampleWithBrowser" />
</Project>
