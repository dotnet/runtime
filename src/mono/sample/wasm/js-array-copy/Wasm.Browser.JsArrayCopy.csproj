<Project Sdk="Microsoft.NET.Sdk">
  <PropertyGroup>
    <WasmCopyAppZipToHelixTestDir Condition="'$(ArchiveTests)' == 'true'">true</WasmCopyAppZipToHelixTestDir>
    <WasmMainJSPath>main.js</WasmMainJSPath>
    <DebugSymbols>true</DebugSymbols>
    <DebugType>embedded</DebugType>
    <WasmDebugLevel>1</WasmDebugLevel>
    <WasmEnableES6>false</WasmEnableES6>

    <GenerateRunScriptForSample Condition="'$(ArchiveTests)' == 'true'">true</GenerateRunScriptForSample>
    <RunScriptCommand>$(ExecXHarnessCmd) wasm test-browser  --app=. --browser=Chrome $(XHarnessBrowserPathArg) --html-file=index.html --output-directory=$(XHarnessOutput) -- $(MSBuildProjectName).dll</RunScriptCommand>
  </PropertyGroup>

  <ItemGroup>
    <WasmExtraFilesToDeploy Include="index.html" />
  </ItemGroup>

  <PropertyGroup>
    <_SampleProject>Wasm.Browser.JsArrayCopy.csproj</_SampleProject>
  </PropertyGroup>

  <ItemGroup>
    <!-- Part of the shared framework but not exposed. -->
    <!-- <ProjectReference Include="..\..\..\..\libraries\System.Private.Runtime.InteropServices.JavaScript\src\System.Private.Runtime.InteropServices.JavaScript.csproj" /> -->
    <Reference Include="..\..\..\..\..\artifacts\bin\System.Private.Runtime.InteropServices.JavaScript\Debug\net7.0-browser\System.Private.Runtime.InteropServices.JavaScript.dll" />
  </ItemGroup>

  <Target Name="RunSample" DependsOnTargets="RunSampleWithBrowser" />
</Project>
