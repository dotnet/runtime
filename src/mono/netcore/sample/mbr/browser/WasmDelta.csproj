<Project Sdk="Microsoft.NET.Sdk">
  <PropertyGroup>
    <WasmMainJSPath>runtime.js</WasmMainJSPath>
    <EnableDefaultItems>false</EnableDefaultItems>
  </PropertyGroup>

  <ItemGroup>
    <ProjectReference Include="..\DeltaHelper\DeltaHelper.csproj" />
  </ItemGroup>


  <Target Name="PrepareDeltasForWasmApp" DependsOnTargets="Build;CompileDiff;ComputeDeltaFileOutputNames" BeforeTargets="WasmBuildApp">
    <ItemGroup>
      <WasmFilesToIncludeInFileSystem Include="@(_DeltaFileForPublish)">
	<TargetPath>\%(_DeltaFileForPublish.Filename)%(_DeltaFileForPublish.Extension)</TargetPath>
      </WasmFilesToIncludeInFileSystem>
    </ItemGroup>
  </Target>
 
  <ItemGroup>
    <WasmExtraFilesToDeploy Include="index.html" />
  </ItemGroup>

  <ItemGroup>
    <Compile Include="Program.cs"/>
  </ItemGroup>

  <PropertyGroup>
    <DeltaScript>deltascript.json</DeltaScript>
    <DeltaCount>2</DeltaCount>
  </PropertyGroup>

  <Import Project="$(MonoProjectRoot)\wasm\build\WasmApp.targets" />

  <!-- Set RoslynILDiffFullPath property to the path of roslynildiff -->
  <Import Project="..\DeltaHelper.targets" />
</Project>
