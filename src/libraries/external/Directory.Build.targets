<Project ToolsVersion="14.0" DefaultTargets="Build" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
  <Import Project="..\Directory.Build.targets" />

  <PropertyGroup>
    <RestorePackages>true</RestorePackages>
    <PrereleaseResolveNuGetPackages>true</PrereleaseResolveNuGetPackages>

    <!--
       We need to pass Configuration to our independent restore step to ensure the output paths are constructed the same.
       This can go away once we move away from our own custom exec call to restore.
    -->
    <AdditionalRestoreArgs Condition="'$(Configuration)' != ''">$(AdditionalRestoreArgs) /p:Configuration=$(Configuration)</AdditionalRestoreArgs>
  </PropertyGroup>

  <!-- Override build and GetTargetPath to return all items deployed -->
  <Target Name="Build"
          Condition=" '$(_InvalidConfigurationWarning)' != 'true' "
          DependsOnTargets="$(BuildDependsOn)"
          Returns="@(BinPlaceItem)" />

  <!-- Depprojs need to run Compile in order to populate items that will be copied to output -->
  <Target Name="GetTargetPath"
          DependsOnTargets="Compile;GetBinPlaceItems"
          Returns="@(BinPlaceItem)" />

</Project>
