PersistedAssemblyBuilder candidate coverage gaps
=============================================

The existing tests cover many core emit/save scenarios. The following cases appear to be under-covered or missing and are good candidates for additional tests:

1. Assembly identity edge cases
   - Persist/save with AssemblyName public key / public key token set.
   - Persist/save with non-default ProcessorArchitecture / ContentType combinations.

2. Save/generate lifecycle interactions
   - Verify behavior when Save(...) is called after GenerateMetadata(...).
   - Verify behavior when GenerateMetadata(...) is called after Save(...).
   - Verify behavior when Save(...) is called multiple times on the same builder.

3. Stream behavior on Save(Stream)
   - Save to stream with non-zero starting Position.
   - Save to non-writable, non-seekable, and already-disposed streams.
   - Verify stream Position semantics after save completes.

4. Module definition boundaries
   - DefineDynamicModule(...) called multiple times on one PersistedAssemblyBuilder.
   - Duplicate module names and case-sensitivity behavior.

5. Entry point shape and validation
   - Entry point methods with unsupported signatures (e.g., void Main(string[]), generic Main).
   - Entry point declared on nested types.

6. Assembly loading isolation scenarios
   - Load persisted output into a collectible AssemblyLoadContext and unload successfully.
   - Load persisted output in multiple contexts and verify type identity isolation.

7. Metadata determinism and reproducibility
   - Generate equivalent assemblies twice and compare key metadata invariants (token ordering, table sizes, MVID expectations).
   - Validate deterministic behavior when declaration order differs but semantic shape is equivalent.

8. Cross-assembly edge references
   - Circular type references between two separately persisted assemblies.
   - Nested generic instantiations crossing persisted assemblies with constraints.

9. Attribute edge cases
   - Large custom attribute blobs near encoding boundaries.
   - Named-argument-only custom attributes and unusual enum/array argument combinations.

10. Failure diagnostics quality
    - Invalid IL / malformed metadata scenarios where specific exception type and message are expected.
