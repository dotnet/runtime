<Project>

  <!-- We need to set these properties before the arcade Version.BeforeCommonTargets.targets are imported -->
  <PropertyGroup Condition="'$(PreReleaseVersionLabel)' == 'servicing' and '$(IsPackable)' == 'true'">
    <!-- If no servicing version is set we need to default to 0 in order for dependency versions to
    be calculated propertly, if we don't set it to 0, we would get the dependency version using the
    product Patch Version -->
    <ServicingVersion Condition="'$(ServicingVersion)' == ''">0</ServicingVersion>
    <!-- Always update the patch version in servicing so that arcade sets the correct package version. -->
    <PatchVersion>$(ServicingVersion)</PatchVersion>
    <_IsWindowsDesktopApp Condition="$(WindowsDesktopCoreAppLibrary.Contains('$(AssemblyName);'))">true</_IsWindowsDesktopApp>
    <_IsAspNetCoreApp Condition="$(AspNetCoreAppLibrary.Contains('$(AssemblyName);'))">true</_IsAspNetCoreApp>
    <_AssemblyInTargetingPack Condition="('$(IsNETCoreAppSrc)' == 'true' or '$(_IsAspNetCoreApp)' == 'true' or '$(_IsWindowsDesktopApp)' == 'true') and '$(TargetFrameworkIdentifier)' != '.NETFramework'">true</_AssemblyInTargetingPack>
    <!-- Assembly version do not get updated in non-netfx ref pack assemblies. -->
    <AssemblyVersion Condition="'$(_AssemblyInTargetingPack)' != 'true'">$(MajorVersion).$(MinorVersion).0.$(ServicingVersion)</AssemblyVersion>
  </PropertyGroup>
</Project>