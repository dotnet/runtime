<Project Sdk="Microsoft.NET.Sdk">
  <PropertyGroup>
    <TargetFrameworks>$(NetCoreAppCurrent)-windows;$(NetCoreAppCurrent)</TargetFrameworks>
    <RootNamespace>System.Xml</RootNamespace>
    <AllowUnsafeBlocks>true</AllowUnsafeBlocks>
    <Nullable>enable</Nullable>
    <EnableRegexGenerator>true</EnableRegexGenerator>
    <EnableDefaultNoneItems>false</EnableDefaultNoneItems>
    <!-- Ignore the 'Utils' folder which contains code that is included explicitly. -->
    <DefaultItemExcludesInProjectFolder>Utils\**\*</DefaultItemExcludesInProjectFolder>
  </PropertyGroup>

  <ItemGroup>
    <None Include="System\Xml\Core\HtmlEncodedRawTextWriter.tt"
          Generator="TextTemplatingFileGenerator"
          LastGenOutput="HtmlEncodedRawTextWriter.cs" />
    <Compile Update="System\Xml\Core\HtmlEncodedRawTextWriter.cs"
             DesignTime="True"
             AutoGen="True"
             DependentUpon="HtmlEncodedRawTextWriter.tt" />

    <None Include="System\Xml\Core\HtmlRawTextWriterGenerator.ttinclude" />
    <None Include="System\Xml\Core\HtmlUtf8RawTextWriter.tt"
          Generator="TextTemplatingFileGenerator"
          LastGenOutput="HtmlUtf8RawTextWriter.cs" />
    <Compile Update="System\Xml\Core\HtmlUtf8RawTextWriter.cs"
             DesignTime="True"
             AutoGen="True"
             DependentUpon="HtmlUtf8RawTextWriter.tt" />

    <None Include="System\Xml\Core\RawTextWriter.ttinclude" />
    <None Include="System\Xml\Core\TextEncodedRawTextWriter.tt"
          Generator="TextTemplatingFileGenerator"
          LastGenOutput="TextEncodedRawTextWriter.cs" />
    <Compile Update="System\Xml\Core\TextEncodedRawTextWriter.cs"
             DesignTime="True"
             AutoGen="True"
             DependentUpon="TextEncodedRawTextWriter.tt" />

    <None Include="System\Xml\Core\TextRawTextWriterGenerator.ttinclude" />
    <None Include="System\Xml\Core\TextUtf8RawTextWriter.tt"
          Generator="TextTemplatingFileGenerator"
          LastGenOutput="TextUtf8RawTextWriter.cs" />
    <Compile Update="System\Xml\Core\TextUtf8RawTextWriter.cs"
             DesignTime="True"
             AutoGen="True"
             DependentUpon="TextUtf8RawTextWriter.tt" />

    <None Include="System\Xml\Core\XmlRawTextWriterGeneratorAsync.ttinclude" />
    <None Include="System\Xml\Core\XmlRawTextWriterGenerator.ttinclude" />
    <None Include="System\Xml\Core\RawTextWriterEncoded.ttinclude" />
    <Content Include="System\Xml\Core\XmlEncodedRawTextWriter.tt"
             LastGenOutput="XmlEncodedRawTextWriter"
             Generator="TextTemplatingFileGenerator" />
    <Compile Update="System\Xml\Core\XmlEncodedRawTextWriter.cs"
             DependentUpon="XmlEncodedRawTextWriter"
             DesignTime="True"
             AutoGen="True" />

    <Content Include="System\Xml\Core\XmlEncodedRawTextWriterAsync.tt"
             LastGenOutput="XmlEncodedRawTextWriterAsync.cs"
             Generator="TextTemplatingFileGenerator" />
    <Compile Update="System\Xml\Core\XmlEncodedRawTextWriterAsync.cs"
             DependentUpon="XmlEncodedRawTextWriterAsync"
             DesignTime="True"
             AutoGen="True" />

    <None Include="System\Xml\Core\RawTextWriterUtf8.ttinclude" />
    <Content Include="System\Xml\Core\XmlUtf8RawTextWriter.tt"
             LastGenOutput="XmlUtf8RawTextWriter.cs"
             Generator="TextTemplatingFileGenerator" />
    <Compile Update="System\Xml\Core\XmlUtf8RawTextWriter.cs"
             DependentUpon="XmlUtf8RawTextWriter"
             DesignTime="True"
             AutoGen="True" />

    <Content Include="System\Xml\Core\XmlUtf8RawTextWriterAsync.tt"
             LastGenOutput="XmlUtf8RawTextWriterAsync.cs"
             Generator="TextTemplatingFileGenerator" />
    <Compile Update="System\Xml\Core\XmlUtf8RawTextWriterAsync.cs"
             DependentUpon="XmlUtf8RawTextWriterAsync"
             DesignTime="True"
             AutoGen="True" />
  </ItemGroup>

  <ItemGroup>
    <Compile Include="$(CommonPath)System\CSharpHelpers.cs" Link="Common\System\CSharpHelpers.cs" />
    <Compile Include="$(CommonPath)System\HexConverter.cs" Link="Common\System\HexConverter.cs" />
    <Compile Include="$(CommonPath)System\LocalAppContextSwitches.Common.cs" Link="System\LocalAppContextSwitches.Common.cs" />
    <Compile Include="$(CommonPath)System\Text\StringBuilderCache.cs" Link="Common\System\StringBuilderCache.cs" />
    <Compile Include="$(CommonPath)System\Text\ValueStringBuilder.cs" Link="Common\System\Text\ValueStringBuilder.cs" />
    <Compile Include="$(CommonPath)System\Text\ValueStringBuilder.AppendSpanFormattable.cs" Link="Common\System\Text\ValueStringBuilder.AppendSpanFormattable.cs" />
  </ItemGroup>

  <ItemGroup Condition="'$(TargetPlatformIdentifier)' != 'windows'">
    <Compile Remove="System\Xml\Xsl\Runtime\XmlCollation.Windows.cs" />
  </ItemGroup>

  <ItemGroup Condition="'$(TargetPlatformIdentifier)' != ''">
    <Compile Remove="System\Xml\Xsl\Runtime\XmlCollation.Unix.cs" />
    <Compile Remove="System\Xml\Core\XmlTextReaderImpl.Unix.cs" />
  </ItemGroup>

  <!-- Embedded DTD files -->
  <ItemGroup>
    <EmbeddedResource Include="Utils\DTDs\XHTML10\no_comments\xhtml1-strict.dtd"
                      LogicalName="xhtml1-strict.dtd" />
    <EmbeddedResource Include="Utils\DTDs\XHTML10\no_comments\xhtml1-transitional.dtd"
                      LogicalName="xhtml1-transitional.dtd" />
    <EmbeddedResource Include="Utils\DTDs\XHTML10\no_comments\xhtml1-frameset.dtd"
                      LogicalName="xhtml1-frameset.dtd" />
    <EmbeddedResource Include="Utils\DTDs\XHTML10\no_comments\xhtml-lat1.ent"
                      LogicalName="xhtml-lat1.ent" />
    <EmbeddedResource Include="Utils\DTDs\XHTML10\no_comments\xhtml-special.ent"
                      LogicalName="xhtml-special.ent" />
    <EmbeddedResource Include="Utils\DTDs\XHTML10\no_comments\xhtml-symbol.ent"
                      LogicalName="xhtml-symbol.ent" />
    <EmbeddedResource Include="Utils\DTDs\RSS091\no_comments\rss-0.91.dtd"
                      LogicalName="rss-0.91.dtd" />
  </ItemGroup>

  <ItemGroup>
    <Reference Include="System.Collections" />
    <Reference Include="System.Collections.Concurrent" />
    <Reference Include="System.Collections.NonGeneric" />
    <Reference Include="System.Collections.Specialized" />
    <Reference Include="System.Diagnostics.TraceSource" />
    <Reference Include="System.Diagnostics.Tracing" />
    <Reference Include="System.Linq.Expressions" />
    <Reference Include="System.Memory" />
    <Reference Include="System.Net.Http" />
    <Reference Include="System.Net.Primitives" />
    <Reference Include="System.ObjectModel" />
    <Reference Include="System.Reflection.Emit" />
    <Reference Include="System.Reflection.Emit.ILGeneration" />
    <Reference Include="System.Reflection.Emit.Lightweight" />
    <Reference Include="System.Reflection.Primitives" />
    <Reference Include="System.Runtime" />
    <Reference Include="System.Runtime.InteropServices" />
    <Reference Include="System.Runtime.Loader" />
    <Reference Include="System.Security.Cryptography" />
    <Reference Include="System.Text.Encoding.Extensions" />
    <Reference Include="System.Text.RegularExpressions" />
    <Reference Include="System.Threading" />
    <Reference Include="System.Threading.Thread" />
  </ItemGroup>
</Project>
