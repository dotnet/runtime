<Project Sdk="Microsoft.Build.NoTargets">
  <PropertyGroup>
    <TargetFramework>$(NetCoreAppCurrent)</TargetFramework>
    <PackageDescription>Exposes Threading APIs for WebAssembly projects</PackageDescription>
    <PackageId>$(MSBuildProjectName)</PackageId>
    <IncludeBuildOutput>true</IncludeBuildOutput>
    <DebugSymbols>false</DebugSymbols>
    <DebugType>none</DebugType>
    <NoTargetsDoNotReferenceOutputAssemblies>false</NoTargetsDoNotReferenceOutputAssemblies>
    <GeneratePackageOnBuild>true</GeneratePackageOnBuild>
    <DisablePackageBaselineValidation>true</DisablePackageBaselineValidation>
    <IsPackable>true</IsPackable>
    <NoWarn>$(NoWarn);NU5131</NoWarn>
    <!-- Place assemblies in the nuget ref folder -->
    <BuildOutputTargetFolder>ref</BuildOutputTargetFolder>
  </PropertyGroup>

  <ItemGroup>
    <!-- ProjectReference Include="..\..\System.Runtime\ref\System.Runtime.csproj" PrivateAssets="all" -->
    <ProjectReference Include="$(LibrariesProjectRoot)System.Threading.Thread.WebAssembly.Threading\ref\System.Threading.Thread.WebAssembly.Threading.csproj" PrivateAssets="all" Pack="true" Private="true" IncludeReferenceAssemblyInPackage="true" />
  </ItemGroup>

  <Target Name="_ExperimentalUpdateFileVersion"
          AfterTargets="_InitializeAssemblyVersion">
    <PropertyGroup>
      <_FileVersionMaj>$(FileVersion.Split('.')[0])</_FileVersionMaj>
      <_FileVersionMin>$(FileVersion.Split('.')[1])</_FileVersionMin>
      <_FileVersionBld>$(FileVersion.Split('.')[2])</_FileVersionBld>
      <_FileVersionRev>$(FileVersion.Split('.')[3])</_FileVersionRev>
      <FileVersion>$(_FileVersionMaj).$([MSBuild]::Add($(_FileVersionMin), 100)).$(_FileVersionBld).$(_FileVersionRev)</FileVersion>
    </PropertyGroup>
  </Target>

</Project>
