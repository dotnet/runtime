<Project Sdk="Microsoft.NET.Sdk">

  <PropertyGroup>
    <TargetFramework>$(NetCoreAppCurrent)</TargetFramework>
    <FeatureMultithreading>true</FeatureMultithreading>
    <AssemblyName>System.Threading</AssemblyName>
    <AllowUnsafeBlocks>true</AllowUnsafeBlocks>
    <!-- tell references.targets to bump the assembly version -->
    <IsExperimentalRefAssembly>true</IsExperimentalRefAssembly>
    <!-- Disable all binplacing since this assembly will clash with the real ref assembly -->
    <EnableBinPlacing>false</EnableBinPlacing>
    <StrongNameKeyId>Microsoft</StrongNameKeyId>
    <IncludePlatformAttributes>true</IncludePlatformAttributes>
    <DefineConstants>$(DefineConstants);TARGET_BROWSER</DefineConstants>
    <DefineConstants>$(DefineConstants);FEATURE_MULTITHREADING</DefineConstants>
    <DefineConstants Condition="'$(TargetsBrowser)' == 'true' and '$(FeatureMultithreading)' == 'true'">$(DefineConstants);FEATURE_WASM_MANAGED_THREADS</DefineConstants>
  </PropertyGroup>

  <ItemGroup>
    <Compile Include="$(LibrariesProjectRoot)System.Threading\ref\System.Threading.cs" />
  </ItemGroup>

  <ItemGroup>
    <ProjectReference Include="..\..\System.Runtime\ref\System.Runtime.csproj" PrivateAssets="all" />
  </ItemGroup>

</Project>
