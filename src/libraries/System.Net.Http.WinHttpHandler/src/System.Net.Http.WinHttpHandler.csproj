<Project Sdk="Microsoft.NET.Sdk">
  <PropertyGroup>
    <IncludeDllSafeSearchPathAttribute>true</IncludeDllSafeSearchPathAttribute>
    <TargetFrameworks>netstandard2.0-Windows_NT;netstandard2.0;net461-Windows_NT</TargetFrameworks>
    <AllowUnsafeBlocks>true</AllowUnsafeBlocks>
    <DefineConstants>$(DefineConstants);WINHTTPHANDLER_DLL</DefineConstants>
    <Nullable>enable</Nullable>
  </PropertyGroup>
  <!-- DesignTimeBuild requires all the TargetFramework Derived Properties to not be present in the first property group. -->
  <PropertyGroup>
    <GeneratePlatformNotSupportedAssemblyMessage Condition="$(TargetFramework.StartsWith('netstandard')) and '$(TargetsWindows)' != 'true'">SR.PlatformNotSupported_WinHttpHandler</GeneratePlatformNotSupportedAssemblyMessage>
    <!-- Ensure Assemblies are first resolved via targeting pack when targeting net461 -->
    <AssemblySearchPaths Condition="'$(TargetFramework)' == 'net461'">$(NuGetPackageRoot)\microsoft.targetingpack.netframework.v4.6.1\1.0.1\lib\net461\;$(AssemblySearchPaths)</AssemblySearchPaths>
  </PropertyGroup>
  <ItemGroup Condition="'$(TargetsWindows)' == 'true'" >
    <Compile Include="$(CommonPath)\Interop\Windows\Interop.Libraries.cs"
             Link="Common\Interop\Windows\Interop.Libraries.cs" />
    <Compile Include="$(CommonPath)Interop\Windows\Crypt32\Interop.CERT_CONTEXT.cs"
             Link="Common\Interop\Windows\Crypt32\Interop.CERT_CONTEXT.cs" />
    <Compile Include="$(CommonPath)Interop\Windows\Crypt32\Interop.CERT_INFO.cs"
             Link="Common\Interop\Windows\Crypt32\Interop.CERT_INFO.cs" />
    <Compile Include="$(CommonPath)Interop\Windows\Crypt32\Interop.CERT_PUBLIC_KEY_INFO.cs"
             Link="Common\Interop\Windows\Crypt32\Interop.CERT_PUBLIC_KEY_INFO.cs" />
    <Compile Include="$(CommonPath)Interop\Windows\Crypt32\Interop.CRYPT_ALGORITHM_IDENTIFIER.cs"
             Link="Common\Interop\Windows\Crypt32\Interop.Interop.CRYPT_ALGORITHM_IDENTIFIER.cs" />
    <Compile Include="$(CommonPath)Interop\Windows\Crypt32\Interop.CRYPT_BIT_BLOB.cs"
             Link="Common\Interop\Windows\Crypt32\Interop.Interop.CRYPT_BIT_BLOB.cs" />
    <Compile Include="$(CommonPath)Interop\Windows\Crypt32\Interop.DATA_BLOB.cs"
             Link="Common\Interop\Windows\Crypt32\Interop.DATA_BLOB.cs" />
    <Compile Include="$(CommonPath)Interop\Windows\Crypt32\Interop.MsgEncodingType.cs"
             Link="Common\Interop\Windows\Crypt32\Interop.Interop.MsgEncodingType.cs" />
    <Compile Include="$(CommonPath)\Interop\Windows\Crypt32\Interop.CertEnumCertificatesInStore.cs"
             Link="Common\Interop\Windows\Crypt32\Interop.CertEnumCertificatesInStore.cs" />
    <Compile Include="$(CommonPath)\Interop\Windows\Crypt32\Interop.certificates_types.cs"
             Link="Common\Interop\Windows\Crypt32\Interop.certificates_types.cs" />
    <Compile Include="$(CommonPath)\Interop\Windows\Crypt32\Interop.certificates.cs"
             Link="Common\Interop\Windows\Crypt32\Interop.certificates.cs" />
    <Compile Include="$(CommonPath)Interop\Windows\Kernel32\Interop.FormatMessage.cs"
             Link="Common\Interop\Windows\Kernel32\Interop.FormatMessage.cs" />
    <Compile Include="$(CommonPath)\Interop\Windows\Kernel32\Interop.GetModuleHandle.cs"
             Link="Common\Interop\Windows\Kernel32\Interop.GetModuleHandle.cs" />
    <Compile Include="$(CommonPath)\Interop\Windows\Interop.HRESULT_FROM_WIN32.cs"
             Link="Common\Interop\Windows\Interop.HRESULT_FROM_WIN32.cs" />
    <Compile Include="$(CommonPath)\Interop\Windows\SChannel\UnmanagedCertificateContext.IntPtr.cs"
             Link="Common\Interop\Windows\SChannel\UnmanagedCertificateContext.IntPtr.cs" />
    <Compile Include="$(CommonPath)\Interop\Windows\WinHttp\Interop.SafeWinHttpHandle.cs"
             Link="Common\Interop\Windows\WinHttp\Interop.SafeWinHttpHandle.cs" />
    <Compile Include="$(CommonPath)\Interop\Windows\WinHttp\Interop.winhttp_types.cs"
             Link="Common\Interop\Windows\WinHttp\Interop.winhttp_types.cs" />
    <Compile Include="$(CommonPath)\Interop\Windows\WinHttp\Interop.winhttp.cs"
             Link="Common\Interop\Windows\WinHttp\Interop.winhttp.cs" />
    <Compile Include="$(CommonPath)\System\CharArrayHelpers.cs"
             Link="Common\System\CharArrayHelpers.cs" />
    <Compile Include="$(CommonPath)\System\StringExtensions.cs"
             Link="Common\System\StringExtensions.cs" />
    <Compile Include="$(CommonPath)\System\Net\HttpKnownHeaderNames.cs"
             Link="Common\System\Net\HttpKnownHeaderNames.cs" />
    <Compile Include="$(CommonPath)\System\Net\HttpKnownHeaderNames.TryGetHeaderName.cs"
             Link="Common\System\Net\HttpKnownHeaderNames.TryGetHeaderName.cs" />
    <Compile Include="$(CommonPath)System\Net\HttpStatusDescription.cs"
             Link="Common\System\Net\Http\HttpStatusDescription.cs" />
    <Compile Include="$(CommonPath)\System\Net\SecurityProtocol.cs"
             Link="Common\System\Net\SecurityProtocol.cs" />
    <Compile Include="$(CommonPath)\System\Net\UriScheme.cs"
             Link="Common\System\Net\UriScheme.cs" />
    <Compile Include="$(CommonPath)\System\Net\Http\HttpHandlerDefaults.cs"
             Link="Common\System\Net\Http\HttpHandlerDefaults.cs" />
    <Compile Include="$(CommonPath)\System\Net\Http\WinInetProxyHelper.cs"
             Link="Common\System\Net\Http\WinInetProxyHelper.cs" />
    <Compile Include="$(CommonPath)\System\Net\Security\CertificateHelper.cs"
             Link="Common\System\Net\Security\CertificateHelper.cs" />
    <Compile Include="$(CommonPath)\System\Net\Security\CertificateHelper.Windows.cs"
             Link="Common\System\Net\Security\CertificateHelper.Windows.cs" />
    <Compile Include="$(CommonPath)\System\Runtime\ExceptionServices\ExceptionStackTrace.cs"
             Link="Common\System\Runtime\ExceptionServices\ExceptionStackTrace.cs" />
    <Compile Include="$(CommonPath)\System\Threading\Tasks\RendezvousAwaitable.cs"
             Link="Common\System\Threading\Tasks\RendezvousAwaitable.cs" />
    <Compile Include="$(CommonPath)System\Threading\Tasks\TaskToApm.cs"
             Link="Common\System\Threading\Tasks\TaskToApm.cs" />
    <Compile Include="System\Net\Http\NetEventSource.WinHttpHandler.cs" />
    <Compile Include="System\Net\Http\NoWriteNoSeekStreamContent.cs" />
    <Compile Include="System\Net\Http\WinHttpAuthHelper.cs" />
    <Compile Include="System\Net\Http\WinHttpCertificateHelper.cs" />
    <Compile Include="System\Net\Http\WinHttpChannelBinding.cs" />
    <Compile Include="System\Net\Http\WinHttpCookieContainerAdapter.cs" />
    <Compile Include="System\Net\Http\WinHttpException.cs" />
    <Compile Include="System\Net\Http\WinHttpHandler.cs" />
    <Compile Include="System\Net\Http\WinHttpRequestCallback.cs" />
    <Compile Include="System\Net\Http\WinHttpRequestState.cs" />
    <Compile Include="System\Net\Http\WinHttpRequestStream.cs" />
    <Compile Include="System\Net\Http\WinHttpResponseHeaderReader.cs" />
    <Compile Include="System\Net\Http\WinHttpResponseParser.cs" />
    <Compile Include="System\Net\Http\WinHttpResponseStream.cs" />
    <Compile Include="System\Net\Http\WinHttpTraceHelper.cs" />
    <Compile Include="System\Net\Http\WinHttpTransportContext.cs" />
    <Compile Include="$(CommonPath)System\IO\StreamHelpers.CopyValidation.cs"
             Link="Common\System\IO\StreamHelpers.CopyValidation.cs" />
    <Compile Include="$(CommonPath)System\Net\Logging\NetEventSource.Common.cs"
             Link="Common\System\Net\Logging\NetEventSource.Common.cs" />
  </ItemGroup>
  <ItemGroup>
    <PackageReference Include="System.Buffers" Version="$(SystemBuffersVersion)" />
    <PackageReference Include="System.Memory" Version="$(SystemMemoryVersion)" />
    <ProjectReference Include="$(LibrariesProjectRoot)System.Runtime.CompilerServices.Unsafe\src\System.Runtime.CompilerServices.Unsafe.ilproj" />
  </ItemGroup>
  <ItemGroup Condition="$(TargetFramework.StartsWith('net4'))">
    <Reference Include="System.Net.Http" />
  </ItemGroup>
</Project>
