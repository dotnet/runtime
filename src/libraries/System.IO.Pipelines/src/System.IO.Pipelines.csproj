<Project Sdk="Microsoft.NET.Sdk">
  <PropertyGroup>
    <TargetFrameworks>$(NetCoreAppCurrent);$(NetCoreAppMinimum);netstandard2.0;$(NetFrameworkMinimum)</TargetFrameworks>
    <Nullable>enable</Nullable>
    <IsPackable>true</IsPackable>
    <PackageDescription>Single producer single consumer byte buffer management.

Commonly Used Types:
System.IO.Pipelines.Pipe
System.IO.Pipelines.PipeWriter
System.IO.Pipelines.PipeReader</PackageDescription>
  </PropertyGroup>

  <ItemGroup>
    <Compile Remove="System\IO\Pipelines\*.netstandard.cs" Condition="'$(TargetFrameworkIdentifier)' == '.NETCoreApp'" />
    <Compile Remove="System\IO\Pipelines\*.netcoreapp.cs" Condition="'$(TargetFrameworkIdentifier)' != '.NETCoreApp'" />

    <Compile Include="$(CommonPath)System\Threading\Tasks\TaskToApm.cs"
             Link="Common\System\Threading\Tasks\TaskToApm.cs" />
    <Compile Include="$(CommonPath)System\IO\StreamHelpers.CopyValidation.cs"
             Link="Common\System\IO\StreamHelpers.CopyValidation.cs" />
  </ItemGroup>

  <ItemGroup Condition="'$(TargetFrameworkIdentifier)' != '.NETCoreApp'">
    <PackageReference Include="System.Buffers" Version="$(SystemBuffersVersion)" />
    <PackageReference Include="System.Memory" Version="$(SystemMemoryVersion)" />
    <PackageReference Include="System.Threading.Tasks.Extensions" Version="$(SystemThreadingTasksExtensionsVersion)" />
  </ItemGroup>
</Project>
