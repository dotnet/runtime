<Project Sdk="Microsoft.NET.Sdk">

  <PropertyGroup>
    <TargetFrameworks>netstandard2.0;$(NetFrameworkMinimum);$(NetCoreAppMinimum)</TargetFrameworks>
    <TargetFrameworks Condition="!$([MSBuild]::IsTargetFrameworkCompatible('$(NetFrameworkMinimum)', 'net47'))">$(TargetFrameworks);net47</TargetFrameworks>
    <IsPackable>true</IsPackable>
    <PackageDescription>Provides support for system time abstraction primitives for .NET Framework and .NET Standard.</PackageDescription>
  </PropertyGroup>

  <Choose>
    <When Condition="$([MSBuild]::GetTargetFrameworkIdentifier('$(TargetFramework)')) == '.NETCoreApp'">
      <PropertyGroup>
        <OmitResources>true</OmitResources>
      </PropertyGroup>

      <ItemGroup>
        <Compile Include="Microsoft.Bcl.TimeProvider.Forwards.cs" />
      </ItemGroup>
    </When>

    <Otherwise>
      <ItemGroup Condition="'$(TargetFrameworkIdentifier)' == '.NETFramework' AND !$([MSBuild]::IsTargetFrameworkCompatible('$(TargetFramework)', 'net47'))">
        <PackageReference Include="System.ValueTuple" Version="$(SystemValueTupleVersion)" />
      </ItemGroup>
      <ItemGroup>
        <Compile Include="$(CommonPath)System\TimeProvider.cs" Link="System\TimeProvider.cs" />
        <Compile Include="$(CommonPath)System\Threading\ITimer.cs" Link="System\Threading\ITimer.cs" />

        <ProjectReference Include="$(LibrariesProjectRoot)Microsoft.Bcl.AsyncInterfaces\src\Microsoft.Bcl.AsyncInterfaces.csproj" />
      </ItemGroup>
    </Otherwise>
  </Choose>

  <ItemGroup>
    <Compile Include="System\Threading\Tasks\TimeProviderTaskExtensions.cs" />
  </ItemGroup>

</Project>
