<Project>
  <Import Project="..\Directory.Build.props" />

  <PropertyGroup>
    <ContractProject>$(MSBuildThisFileDirectory)..\ref\$(MSBuildProjectName).csproj</ContractProject>
    <IsRuntimeAndReferenceAssembly Condition="!Exists('$(ContractProject)')">true</IsRuntimeAndReferenceAssembly>
  </PropertyGroup>

  <!-- If an extra reference assembly exists, use its generated source instead of invoking GenFacades again. -->
  <PropertyGroup Condition="'$(IsRuntimeAndReferenceAssembly)' != 'true'">
    <IsPartialFacadeAssembly>false</IsPartialFacadeAssembly>
  </PropertyGroup>

  <ItemGroup Condition="'$(IsRuntimeAndReferenceAssembly)' != 'true'">
    <Compile Include="$(MSBuildThisFileDirectory)..\ref\$(MSBuildProjectName).g.cs"
             ExcludeFromGenFacades="true" />
    <!-- Include any forwards needed by both ref and src projects. -->
    <Compile Include="$(MSBuildThisFileDirectory)..\ref\$(MSBuildProjectName).cs"
             Condition="Exists('$(MSBuildThisFileDirectory)..\ref\$(MSBuildProjectName).cs')" />
  </ItemGroup>
</Project>
