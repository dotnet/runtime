trigger:
  branches:
    include:
    - master
    - dev/infrastructure
    - release/*.*

pr: none

variables:
- template: /eng/pipelines/common/variables.yml
- name: TeamName
  value: dotnet-core-acquisition

stages:
- stage: Build
  jobs:
  #
  # Checkout repository
  #
  - template: /eng/pipelines/common/checkout-job.yml

  - template: /eng/pipelines/common/platform-matrix.yml
    parameters:
      jobTemplate: /eng/pipelines/common/global-build-job.yml
      buildConfig: Checked
      platforms:
      - Windows_NT_x64
      jobParameters:
        enableRichCodeNavigation: true
        timeoutInMinutes: 120
        buildArgs: -s libs.ref+libs.src -c debug -runtimeConfiguration Checked

  - template: /eng/pipelines/common/platform-matrix.yml
    parameters:
      jobTemplate: /eng/pipelines/common/global-build-job.yml
      buildConfig: debug
      platforms:
      - Windows_NT_x64
      jobParameters:
        testGroup: innerloop
        nameSuffix: Mono_Libraries
        buildArgs: -s mono -c debug -runtimeConfiguration Checked
