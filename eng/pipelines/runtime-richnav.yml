trigger:
  branches:
    include:
    - master
    - dev/infrastructure
    - release/*.*

pr: none

variables:
- template: /eng/pipelines/common/variables.yml
# TODO: (Consolidation) Switch away from old signing/validation variables from former Core-Setup. https://github.com/dotnet/runtime/issues/1027
- name: TeamName
  value: dotnet-core-acquisition
# Set the target blob feed for package publish during official and validation builds.
- name: _DotNetArtifactsCategory
  value: .NETCore
- name: _DotNetValidationArtifactsCategory
  value: .NETCoreValidation

stages:
- stage: Build
  jobs:
  #
  # Checkout repository
  #
  - template: /eng/pipelines/common/checkout-job.yml

  #
  # Build CoreCLR and libraries for Windows
  #
  - template: /eng/pipelines/common/platform-matrix-multijob.yml
    parameters:
      platforms:
      - Windows_NT_X64
      buildConfig: checked
      jobTemplates:
      - jobTemplate: /eng/pipelines/coreclr/templates/build-job.yml
        jobParameters:
          enableRichCodeNavigation: true
      - jobTemplate: /eng/pipelines/libraries/build-job.yml
        jobParameters:
          enableRichCodeNavigation: true
