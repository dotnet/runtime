parameters:
  archType: ''
  container: ''
  buildConfig: ''
  crossBuild: false
  dependOnEvaluatePaths: false
  helixQueues: ''
  osGroup: ''
  osSubgroup: ''
  platform: ''
  pool: ''
  runtimeFlavor: 'coreclr'
  shouldContinueOnError: false
  targetRid: ''
  variables: []

jobs:
  - template: /eng/pipelines/common/global-build-job.yml
    parameters:
      buildArgs: -s clr+libs+packs
                 -c ${{ parameters.buildConfig }}
      buildConfig: ${{ parameters.buildConfig }}

      archType: ${{ parameters.archType }}
      container: ${{ parameters.container }}
      crossBuild: ${{ parameters.crossBuild }}
      dependOnEvaluatePaths: ${{ parameters.dependOnEvaluatePaths }}
      helixQueues: ${{ parameters.helixQueues }}
      nameSuffix: TestReadyToRun_Libraries
      osGroup: ${{ parameters.osGroup }}
      osSubgroup: ${{ parameters.osSubgroup }}
      platform: ${{ parameters.platform }}
      pool: ${{ parameters.pool }}
      runtimeFlavor: ${{ parameters.runtimeFlavor }}
      shouldContinueOnError: ${{ parameters.shouldContinueOnError }}
      targetRid: ${{ parameters.targetRid }}
      timeoutInMinutes: 120
      variables: ${{ parameters.variables }}

      extraStepsTemplate: '/eng/pipelines/libraries/run-test-ready-to-run.yml'
      extraStepsParameters:
        archType: ${{ parameters.archType }}
        buildConfig: ${{ parameters.buildConfig }}
        osGroup: ${{ parameters.osGroup }}
        variables: ${{ parameters.variables }}
