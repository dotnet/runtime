parameters:
  configForBuild: 'Release'

steps:
  - script: "./dotnet.sh build -p:TargetOS=Browser -p:TargetArchitecture=wasm -p:Configuration=${{ parameters.configForBuild }} /nr:false /p:TreatWarningsAsErrors=true /p:ContinuousIntegrationBuild=true src/tests/BuildWasmApps/Wasm.Build.Tests/Wasm.Build.Tests.csproj /t:InstallWorkloadUsingArtifacts"
    displayName: "Install workload using artifacts"

  - template: /eng/pipelines/common/upload-artifact-step.yml
    parameters:
      rootFolder: '$(Build.SourcesDirectory)/artifacts/'
      includeRootFolder: true
      displayName: Browser Wasm Artifacts
      artifactName: BrowserWasm
      archiveType: zip
      archiveExtension: .zip
