trigger: none

pr:
  branches:
    include:
    - master

jobs:
#
# Checkout repository
#
- template: templates/checkout-job.yml

#
# Build CoreCLR
#
- template: /eng/pipelines/common/platform-matrix.yml
  parameters:
    jobTemplate: /eng/pipelines/coreclr/templates/build-job.yml
    buildConfig: checked
    platforms:
    - OSX_x64
    jobParameters:
      testGroup: innerloop

#
# Build CoreFX using live CoreLib from CoreCLR
#
- template: /eng/pipelines/common/platform-matrix.yml
  parameters:
    jobTemplate: /eng/pipelines/libraries/corefx-steps.yml
    buildConfig: checked
    platforms:
    - OSX_x64
    jobParameters:
      isOfficialBuild: false
      testScope: empty
      coreClrArtifactName: 'BinDir_OSX_x64_checked'
      coreFxArtifactName: 'CoreFX_OSX_x64_checked'

#
# Checked test builds using live CoreFX
#
- template: /eng/pipelines/common/platform-matrix.yml
  parameters:
    jobTemplate: /eng/pipelines/coreclr/templates/build-test-job.yml
    buildConfig: checked
    platforms:
    - OSX_x64
    helixQueueGroup: pr
    jobParameters:
      testGroup: innerloop
      coreFxArtifactName: 'CoreFX_OSX_x64_checked'

#
# Checked JIT test executions
#
- template: /eng/pipelines/common/platform-matrix.yml
  parameters:
    jobTemplate: /eng/pipelines/coreclr/templates/run-test-job.yml
    buildConfig: checked
    platforms:
    - OSX_x64
    helixQueueGroup: pr
    jobParameters:
      testGroup: innerloop

