<Project>
  <PropertyGroup>
    <TestProjectName Condition="'$(TestProjectName)' == ''">$(MSBuildProjectName)</TestProjectName>
    <TestFramework Condition="'$(TestFramework)' == ''">xunit</TestFramework>
    <!-- Implicit test build support when invoking the Test target on the project directly. -->
    <TestDependsOn Condition="'$(TestNoBuild)' != 'true' and '$(BuildAllProjects)' != 'true'">Build</TestDependsOn>
    <TestDependsOn>$(TestDependsOn);GenerateRunScript;RunTests</TestDependsOn>
    <MonoEnvOptions Condition="'$(MonoEnvOptions)' == '' and '$(MonoEnableInterpreter)' == 'true'">--interpreter</MonoEnvOptions>
  </PropertyGroup>

  <!-- Set env variable to use the local netfx assemblies instead of the ones in the GAC. -->
  <ItemGroup Condition="'$(TargetsNetFx)' == 'true'">
    <RunScriptCommands Include="set DEVPATH=%RUNTIME_PATH%" />
  </ItemGroup>

  <!-- Provide runtime options to Mono (interpreter, aot, debugging, etc) -->
  <ItemGroup Condition="'$(MonoEnvOptions)' != ''">
    <RunScriptCommands Condition="'$(TargetsWindows)' == 'true'" Include="set MONO_ENV_OPTIONS='$(MonoEnvOptions)'" />
    <RunScriptCommands Condition="'$(TargetsWindows)' != 'true'" Include="export MONO_ENV_OPTIONS='$(MonoEnvOptions)'" />
  </ItemGroup>

  <!--
    Unit/Functional/Integration test support.
    Supported runners: xunit.
  -->
  <Import Project="$(MSBuildThisFileDirectory)xunit\xunit.props" Condition="'$(TestFramework)' == 'xunit'" />
</Project>
