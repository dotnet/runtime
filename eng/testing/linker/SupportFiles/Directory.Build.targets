<Project>
  <Import Project="$(RepositoryEngineeringDir)testing\tests.mobile.targets" Condition="'$(RuntimeIdentifier)' == 'browser-wasm'" />
  <Import Project="$(RepositoryEngineeringDir)targetingpacks.targets" />

  <PropertyGroup>
    <BundleDir>$([MSBuild]::NormalizeDirectory('$(MSBuildProjectDirectory)', '$(OutputPath)', 'publish', 'wwwroot'))</BundleDir>
    <WasmMainAssemblyFileName>project.dll</WasmMainAssemblyFileName>
    <WasmGenerateRunV8Script>true</WasmGenerateRunV8Script>
  </PropertyGroup>

  <Target Name="CreateTestWasmAppBundle"
          AfterTargets="Publish"
          DependsOnTargets="PrepareForWasmBuildApp;_WasmGenerateRunV8Script;BundleTestWasmApp"
          Condition="'$(TargetOS)' == 'browser' or '$(TargetOS)' == 'wasi'" />

  <PropertyGroup Condition="'$(PublishAot)' == 'true'">
    <_IlcReferencedAsPackage>false</_IlcReferencedAsPackage>
    <ILCompilerTargetsPath>$(CoreCLRBuildIntegrationDir)Microsoft.DotNet.ILCompiler.SingleEntry.targets</ILCompilerTargetsPath>
  </PropertyGroup>

  <!-- Overriding these targets as these projects won't need to binplace -->
  <Target Name="PublishTestAsSelfContained" />

</Project>
